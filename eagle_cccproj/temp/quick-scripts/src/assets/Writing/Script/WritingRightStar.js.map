{"version":3,"sources":["assets/Writing/Script/WritingRightStar.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qDAAgD;AAE1C,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAE5C,IAAM,kBAAkB,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AACtC,IAAM,mBAAmB,GAAG,kBAAkB,CAAC,CAAC,CAAC,GAAG,kBAAkB,CAAC,CAAC,CAAC,CAAC;AAC1E,IAAM,eAAe,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;AACjC,IAAM,aAAa,GAAG,GAAG,GAAG,CAAC,CAAC;AAC9B,IAAM,aAAa,GAAG,GAAG,CAAC;AAE1B;;GAEG;AAEH;IAA8C,oCAAe;IAD7D;QAAA,qEAoDC;QAlDG,oBAAc,GAAiB,IAAI,CAAC;QAwB5B,kBAAY,GAAG,KAAK,CAAC;;IA0BjC,CAAC;yBAnDoB,gBAAgB;IAGjC;;;OAGG;IACI,mCAAQ,GAAf,UAAgB,cAA4B;QACxC,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;IACzC,CAAC;IAED;;OAEG;IACW,mCAAkB,GAAhC;QACI,OAAO,EAAE,CAAC,KAAK,CACX,EAAE,CAAC,QAAQ,CACP,EAAE,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,CAAC,CAAC,EACzE,EAAE,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,CAAC,CAAC,CAC5E;QACD,aAAa;QACb,EAAE,CAAC,QAAQ,CAAC,mBAAmB,EAAE,aAAa,GAAG,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,CACvE,CAAC;IACN,CAAC;IAIM,sCAAW,GAAlB;QACI,OAAO,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IAED;;OAEG;IACI,gCAAK,GAAZ;QACI,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAE1B,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IAC7B,CAAC;IAED;;OAEG;IACI,iCAAM,GAAb;QACI,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC,aAAa,CAAC,EAAE,kBAAgB,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;QACrG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;QAEnD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;IAC7B,CAAC;;IAlDgB,gBAAgB;QADpC,OAAO;OACa,gBAAgB,CAmDpC;IAAD,uBAAC;CAnDD,AAmDC,CAnD6C,yBAAe,GAmD5D;kBAnDoB,gBAAgB","file":"","sourceRoot":"/","sourcesContent":["import WritingSmallDot from './WritingSmallDot';\n\nconst { ccclass, property } = cc._decorator;\n\nconst DOT_SHOWN_DURATION = [0.2, 0.4];\nconst STAR_SHOWN_DURATION = DOT_SHOWN_DURATION[0] + DOT_SHOWN_DURATION[1];\nconst DOT_SHOWN_SCALE = [1.5, 1];\nconst STAR_ROTATION = 360 * 2;\nconst TURN_ON_DELAY = 0.1;\n\n/**\n * 显示的星星\n */\n@ccclass\nexport default class WritingRightStar extends WritingSmallDot {\n    rightStarShown: cc.AudioClip = null;\n\n    /**\n     * 设置显示音频\n     * @param rightStarShown \n     */\n    public setAudio(rightStarShown: cc.AudioClip) {\n        this.rightStarShown = rightStarShown;\n    }\n\n    /**\n     * 获取星星展示动画\n     */\n    public static getStarShownAction() {\n        return cc.spawn(\n            cc.sequence(\n                cc.scaleTo(DOT_SHOWN_DURATION[0], DOT_SHOWN_SCALE[0], DOT_SHOWN_SCALE[0]),\n                cc.scaleTo(DOT_SHOWN_DURATION[1], DOT_SHOWN_SCALE[1], DOT_SHOWN_SCALE[1])\n            ),\n            // 随机多旋转0-90度\n            cc.rotateTo(STAR_SHOWN_DURATION, STAR_ROTATION + 90 * Math.random())\n        );\n    }\n\n    private _isTriggered = false;\n\n    public isTriggered() {\n        return this._isTriggered;\n    }\n\n    /**\n     * 重置\n     */\n    public reset() {\n        this._isTriggered = false;\n\n        this.node.active = false;\n    }\n\n    /**\n     * 点亮该星星，旋转出来，周边小点也同时渐显出来\n     */\n    public turnOn() {\n        this.node.scale = 0;\n        this.node.active = true;\n        this.node.runAction(cc.sequence(cc.delayTime(TURN_ON_DELAY), WritingRightStar.getStarShownAction()));\n        cc.audioEngine.play(this.rightStarShown, false, 1);\n\n        this._isTriggered = true;\n    }\n}\n"]}